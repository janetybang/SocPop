group_by(start, stop)%>%
expand(ges = x$start)
y %>%
group_by(code, start, stop)%>%
expand(ges = x$start)
x %>%
group_by(code, start, stop)%>%
expand(ges = y$start)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start,
ges_after = y$stop)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
between(ges_before, start,stop)
?between
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = between(ges_before, start,stop))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(start, stop)%>%
summarise(overlap = sum(overlap))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap = sum(overlap))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap = sum(overlap))%>%
expand(ges_before = y$stop)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap = sum(overlap))%>%
expand(ges_after = y$stop)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap = sum(overlap))%>%
group_by(code, start, stop, overlap)%>%
expand(ges_after = y$stop)
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap))%>%
group_by(code, start, stop, overlap)%>%
expand(ges_after = y$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))%>%
group_by(start, stop)%>%
mutate(int = between(start,start,stop))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap))%>%
group_by(code, start, stop, overlap)%>%
expand(ges_after = y$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap_before = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap_before))%>%
group_by(code, start, stop, overlap)%>%
expand(ges_after = y$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap_before = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap_before))%>%
group_by(code, start, stop, overlap_before)%>%
expand(ges_after = y$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))
y %>%
group_by(code, start, stop)%>%
expand(ges_before = x$start)%>%
mutate(overlap_before = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap_before))%>%
group_by(code, start, stop, overlap_before)%>%
expand(ges_after = x$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))
x %>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap_before = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap_before))%>%
group_by(code, start, stop, overlap_before)%>%
expand(ges_after = y$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))
x %>%
mutate(start = start -1,
stop = stop + 1)%>%
group_by(code, start, stop)%>%
expand(ges_before = y$start)%>%
mutate(overlap_before = ifelse(start <= ges_before & stop >= ges_before, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_before = sum(overlap_before))%>%
group_by(code, start, stop, overlap_before)%>%
expand(ges_after = y$stop)%>%
mutate(overlap_after = ifelse(start <= ges_after & stop >= ges_after, T,F))%>%
group_by(code, start, stop,overlap_before)%>%
summarise(overlap_after = sum(overlap_after))
x %>%
mutate(start = start -1,
stop = stop + 1)%>%
group_by(code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))
x %>%
mutate(start = start -1,
stop = stop + 1)%>%
group_by(code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = sum(overlap_start,overlap_stop))
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F)
x %>%
x %>%
mutate(start = start -1,
stop = stop + 1)%>%
group_by(code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))
read_csv("./data/test.csv", col_names = F)
read_csv("./data/test.csv", col_names = T)
read_csv("./data/test.csv", col_names = F)
y <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver linguistic")
x %>%
mutate(start = start -1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
x <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver nonlinguistic")
y <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver linguistic")
x %>%
mutate(start = start -1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
x %>%
mutate(start = start -2,
stop = stop + 2)%>%
group_by(id, code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
x %>%
mutate(start = start ,
stop = stop )%>%
group_by(id, code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
x %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = y$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = y$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
non_ling <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver nonlinguistic")
ling <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver linguistic")
overlap < -  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
overlap <-  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
overlap
non_ling_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n())
non_ling_sum
ling_sum <- ling %>%
group_by(id)%>%
summarise(labels = n())
overlap_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n()) <-  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
non_ling <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver nonlinguistic")
ling <- read_csv("./data/test.csv", col_names = F)%>%
rename(start = X3,
stop = X4,
code = X1,
id = X7)%>%
select(id,code, start,stop)%>%
filter(code == "Caregiver linguistic")
overlap_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n()) <-  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
overlap_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n()) <-  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
overlap_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n()) <-  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
overlap_sum <-  non_ling %>%
mutate(start = start - 1,
stop = stop + 1)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
non_ling_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n())
ling_sum <- ling %>%
group_by(id)%>%
summarise(labels = n())
left_join(non_ling_sum,
ling_sum,
overlap_sum)
non_ling_sum
ling_sum
overlap_sum
left_join(non_ling_sum,
ling_sum,
overlap_sum)
left_join(non_ling_sum,
ling_sum)
left_join(non_ling_sum,
ling_sum)%>%
left_join(overlap_sum)
ling_sum <- ling %>%
group_by(id)%>%
summarise(labels = n())
ling_sum
left_join(non_ling_sum,
ling_sum)%>%
left_join(overlap_sum)
overlap_sum <-  non_ling %>%
mutate(start = start -0 ,
stop = stop + 0)%>%
group_by(id, code, start, stop)%>%
expand(label_start = ling$start)%>%
mutate(overlap_start = ifelse(start <= label_start & stop >= label_start, T,F))%>%
group_by(id, code, start, stop)%>%
summarise(overlap_start = sum(overlap_start))%>%
group_by(id, code, start, stop, overlap_start)%>%
expand(label_stop = ling$stop)%>%
mutate(overlap_stop = ifelse(start <= label_stop & stop >= label_stop, T,F))%>%
group_by(id, code, start, stop,overlap_start)%>%
summarise(overlap_stop = sum(overlap_stop))%>%
mutate(overlap = ifelse(sum(overlap_start,overlap_stop) > 0, T,F))%>%
group_by(id)%>%
summarise(overlap = sum(overlap))
non_ling_sum <- non_ling %>%
group_by(id)%>%
summarise(gestures = n())
ling_sum <- ling %>%
group_by(id)%>%
summarise(labels = n())
left_join(non_ling_sum,
ling_sum)%>%
left_join(overlap_sum)
?left_join
join_all(list(non_ling_sum,ling_sum,overlap_sum), by='id', type='left')
?join_all
join_all(list(non_ling_sum,ling_sum,overlap_sum), by='id', type='left')
plyr::join_all(list(non_ling_sum,ling_sum,overlap_sum), by='id', type='left')
